<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Hiko Adventure</title>
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app">
        <!-- ========== –í–ï–†–•–ù–Ø–Ø –ü–ê–ù–ï–õ–¨ (–í–ò–î–ù–ê –í–°–ï–ì–î–ê) ========== -->
        <div id="stats">
            <div class="avatar" id="user-avatar">
                <img id="avatar-img" src="" alt="avatar">
                <span class="level-badge-on-avatar" id="avatar-level">1</span>
            </div>
            <span id="energy-display">‚ö° 100/100</span>
            <span id="money">0</span> ü™ô
        </div>

        <!-- ========== –ì–õ–ê–í–ù–´–ô –≠–ö–†–ê–ù ========== -->
        <div id="screen-main" class="screen active">
            <div id="character-area">
                <div id="character-container">
                    <img id="base-character" src="img/men.png" alt="–ü–µ—Ä—Å–æ–Ω–∞–∂">
                    <div id="equipment-layer"></div>
                    <div id="pet-layer"></div>
                </div>
            </div>
        </div>

        <!-- ========== –ú–ê–°–¢–ï–†–°–ö–ê–Ø ========== -->
        <div id="screen-workshop" class="screen">
            <div class="tabs">
                <button class="tab-button active" data-tab="character">üë§ –ü–µ—Ä—Å–æ–Ω–∞–∂</button>
                <button class="tab-button" data-tab="pets">üêæ –ü–∏—Ç–æ–º—Ü—ã</button>
                <button class="tab-button" data-tab="talents">‚ú® –¢–∞–ª–∞–Ω—Ç—ã</button>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞ –ü–ï–†–°–û–ù–ê–ñ (—ç–∫–∏–ø–∏—Ä–æ–≤–∫–∞) -->
            <div id="tab-character" class="tab-content active">
                <div class="customization-preview">
                    <div id="char-preview-container" class="character-preview">
                        <img id="preview-base" src="img/men.png" alt="–ü–µ—Ä—Å–æ–Ω–∞–∂">
                        <div id="preview-equipment"></div>
                        <div id="preview-pet"></div>
                    </div>
                </div>
                <div class="slot-selector">
                    <button class="slot-btn active" data-slot="hat">üé© –ì–æ–ª–æ–≤–∞</button>
                    <button class="slot-btn" data-slot="shirt">üëï –¢—É–ª–æ–≤–∏—â–µ</button>
                    <button class="slot-btn" data-slot="legs">üëñ –ù–æ–≥–∏</button>
                </div>
                <div id="slot-items" class="items-grid"></div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞ –ü–ò–¢–û–ú–¶–´ -->
            <div id="tab-pets" class="tab-content">
                <h3>üêæ –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–∏—Ç–æ–º—Ü—ã</h3>
                <div id="pets-grid" class="items-grid"></div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞ –¢–ê–õ–ê–ù–¢–´ (–ø–æ–∫—É–ø–∫–∞ –∑–∞—Ä—è–¥–æ–≤, —É–ª—É—á—à–µ–Ω–∏–µ, –∫—Ä–∞—Ñ—Ç) -->
            <div id="tab-talents" class="tab-content">
                <!-- –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –≤–∫–ª–∞–¥–∫–∏ -->
                <div class="talent-tabs">
                    <button class="tab-btn active" data-tab="shop-charges">üõí –ó–∞—Ä—è–¥—ã</button>
                    <button class="tab-btn" data-tab="shop-upgrade">‚¨ÜÔ∏è –£–ª—É—á—à–µ–Ω–∏–µ</button>
                    <button class="tab-btn" data-tab="shop-craft">‚öíÔ∏è –ö—Ä–∞—Ñ—Ç</button>
                </div>

                <!-- –ü–æ–∫—É–ø–∫–∞ –∑–∞—Ä—è–¥–æ–≤ -->
                <div id="shop-charges" class="shop-tab active">
                    <div class="attack-charges-container"></div>
                </div>

                <!-- –£–ª—É—á—à–µ–Ω–∏–µ —Ç–∞–ª–∞–Ω—Ç–æ–≤ -->
                <div id="shop-upgrade" class="shop-tab">
                    <div class="talents-upgrade-container">
                        <div class="talent">
                            <span>üó°Ô∏è –ë–∞–∑–æ–≤—ã–π —É—Ä. <span id="basicLevel">1</span> (—É—Ä–æ–Ω <span id="basicDmg">10</span>)</span>
                            <button class="upgrade-btn" data-talent="basic">75</button>
                        </div>
                        <div class="talent">
                            <span>üí• –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É—Ä. <span id="critLevel">1</span> (—à–∞–Ω—Å <span id="critChanceUpgrade">20</span>%)</span>
                            <button class="upgrade-btn" data-talent="critical">150</button>
                        </div>
                        <div class="talent">
                            <span>‚ò†Ô∏è –Ø–¥–æ–≤–∏—Ç—ã–π —É—Ä. <span id="poisonLevel">1</span> (—É—Ä–æ–Ω <span id="poisonDmgUpgrade">3</span>)</span>
                            <button class="upgrade-btn" data-talent="poison">200</button>
                        </div>
                    </div>
                </div>

                <!-- –ö—Ä–∞—Ñ—Ç —Ç–∞–ª–∞–Ω—Ç–æ–≤ -->
                <div id="shop-craft" class="shop-tab">
                    <div class="crafting-area">
                        <div class="craft-slots">
                            <div class="craft-slot" data-talent=""></div>
                            <div class="craft-slot" data-talent=""></div>
                        </div>
                        <div class="craft-result">
                            <button id="sonicButton" style="display:none;">üîä –ó–≤—É–∫–æ–≤–æ–π</button>
                            <button id="fireButton" style="display:none;">üî• –û–≥–Ω–µ–Ω–Ω—ã–π</button>
                            <button id="iceButton" style="display:none;">‚ùÑÔ∏è –õ–µ–¥—è–Ω–æ–π</button>
                        </div>
                        <div class="talent-pool">
                            <h4>üì¶ –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–∞–ª–∞–Ω—Ç—ã –¥–ª—è –∫—Ä–∞—Ñ—Ç–∞</h4>
                            <div class="talent-cards">
                                <div class="talent-card" data-talent="basic">üó°Ô∏è –ë–∞–∑–æ–≤—ã–π</div>
                                <div class="talent-card" data-talent="critical">üí• –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π</div>
                                <div class="talent-card" data-talent="poison">‚ò†Ô∏è –Ø–¥–æ–≤–∏—Ç—ã–π</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========== –ì–ò–õ–¨–î–ò–Ø ========== -->
        <div id="screen-guild" class="screen">
            <div id="guild-view"></div>
        </div>

        <!-- ========== –ù–ò–ñ–ù–Ø–Ø –ù–ê–í–ò–ì–ê–¶–ò–Ø ========== -->
        <nav id="bottom-nav">
            <button data-screen="main" class="nav-btn active">üë§</button>
            <button data-screen="workshop" class="nav-btn">üîß</button>
            <button data-screen="guild" class="nav-btn">üè∞</button>
        </nav>

        <!-- ========== –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û: –°–û–ó–î–ê–ù–ò–ï –ì–ò–õ–¨–î–ò–ò ========== -->
        <div id="create-guild-modal" class="modal hidden">
            <div class="modal-content">
                <h3>‚ú® –°–æ–∑–¥–∞–Ω–∏–µ –≥–∏–ª—å–¥–∏–∏</h3>
                <input type="text" id="guild-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –≥–∏–ª—å–¥–∏–∏ (–º–∏–Ω. 5 —Å–∏–º–≤–æ–ª–æ–≤)">
                <textarea id="guild-desc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)" rows="2"></textarea>
                <input type="url" id="guild-chat-link" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ —á–∞—Ç/–∫–∞–Ω–∞–ª (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)">
                <div class="modal-buttons">
                    <button id="confirm-create-guild" class="glow-button">‚úÖ –°–æ–∑–¥–∞—Ç—å</button>
                    <button id="cancel-create-guild">‚ùå –û—Ç–º–µ–Ω–∞</button>
                </div>
            </div>
        </div>

        <!-- ========== –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û: –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ë–ò–¢–í–´ ========== -->
        <div id="battle-result-modal" class="modal hidden">
            <div class="modal-content">
                <h3 id="battle-result-title">–†–µ–∑—É–ª—å—Ç–∞—Ç –±–∏—Ç–≤—ã</h3>
                <div id="battle-result-content" style="max-height: 300px; overflow-y: auto; margin-bottom: 16px; padding-right: 5px;"></div>
                <div class="modal-buttons">
                    <button id="close-battle-result" class="glow-button" style="background: #4a6c8f;">–ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
            </div>
        </div>

        <!-- ========== –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ü–†–û–§–ò–õ–Ø ========== -->
        <div id="profile-modal" class="modal hidden">
            <div class="modal-content profile-content">
                <div class="profile-avatar">
                    <img id="profile-avatar-img" src="" alt="Avatar">
                </div>
                <div class="profile-name" id="profile-name">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                <div class="profile-id">ID: <span id="profile-id">...</span></div>
                <div class="profile-level">–£—Ä–æ–≤–µ–Ω—å <span id="profile-level">1</span></div>
                <div class="xp-bar-container">
                    <div class="xp-bar-fill" id="profile-xp-fill" style="width:0%"></div>
                </div>
                <div class="xp-text"><span id="profile-xp-current">0</span> / <span id="profile-xp-next">100</span> XP</div>
                <div class="profile-damage">üí• –í—Å–µ–≥–æ —É—Ä–æ–Ω–∞: <span id="profile-damage">0</span></div>
                <button class="close-modal-btn glow-button" id="close-profile-modal">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>

        <!-- ========== –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –î–†–£–ó–ï–ô ========== -->
        <div id="friends-modal" class="modal hidden">
            <div class="modal-content friends-content">
                <h3>üë• –î—Ä—É–∑—å—è</h3>
                <div class="friends-my-id">
                    <span>–í–∞—à ID: </span>
                    <strong id="friends-my-id-value"></strong>
                    <button class="copy-btn" onclick="copyToClipboard(document.getElementById('friends-my-id-value').innerText)">üìã</button>
                </div>

                <div class="friends-tabs">
                    <button class="friends-tab-btn active" data-tab="list">–î—Ä—É–∑—å—è</button>
                    <button class="friends-tab-btn" data-tab="requests">–ó–∞—è–≤–∫–∏</button>
                    <button class="friends-tab-btn" data-tab="search">–ù–∞–π—Ç–∏ –¥—Ä—É–≥–∞</button>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞: –°–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π -->
                <div id="friends-list-tab" class="friends-tab-content active">
                    <div id="friends-list-container"></div>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞: –í—Ö–æ–¥—è—â–∏–µ –∑–∞—è–≤–∫–∏ -->
                <div id="friends-requests-tab" class="friends-tab-content">
                    <div id="friends-requests-container"></div>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞: –ü–æ–∏—Å–∫ –¥—Ä—É–≥–∞ -->
                <div id="friends-search-tab" class="friends-tab-content">
                    <input type="text" id="friends-search-input" placeholder="Telegram ID –¥—Ä—É–≥–∞">
                    <button id="friends-search-btn" class="glow-button">–ù–∞–π—Ç–∏</button>
                    <div id="friends-search-result"></div>
                </div>

                <button class="close-modal-btn" id="close-friends-modal">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>

        <!-- –ü–ª–∞–≤–∞—é—â–∞—è –∫–Ω–æ–ø–∫–∞ –¥—Ä—É–∑–µ–π -->
        <div id="friends-fab" class="fab" onclick="openFriendsModal()">
            <span id="friends-online-count">0</span>–≤ —Å–µ—Ç–∏
        </div>
    </div>

    <!-- Telegram Web App SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
    <!-- –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç -->
    <script src="script.js"></script>
</body>
</html>
