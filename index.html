<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Hiko Adventure</title>
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app">
        <!-- ========== –í–ï–†–•–ù–Ø–Ø –ü–ê–ù–ï–õ–¨ (–í–ò–î–ù–ê –í–°–ï–ì–î–ê) ========== -->
        <div id="stats" data-tooltip="–≠–Ω–µ—Ä–≥–∏—è –∏ –º–æ–Ω–µ—Ç—ã. –≠–Ω–µ—Ä–≥–∏—è –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º.">
            <div class="avatar" id="user-avatar" data-tooltip="–¢–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å. –ù–∞–∂–º–∏, —á—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É.">
                <img id="avatar-img" src="" alt="avatar">
                <span class="level-badge-on-avatar" id="avatar-level">1</span>
            </div>
            <span id="energy-display">‚ö° 100/100</span>
            <span id="money">0</span> ü™ô
            <!-- –ö–Ω–æ–ø–∫–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –±–æ–Ω—É—Å–æ–≤ -->
            <div class="bonus-icon" onclick="openDailyBonusModal()" data-tooltip="–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å! –ó–∞—Ö–æ–¥–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å.">üéÅ</div>
        </div>

        <!-- ========== –ì–õ–ê–í–ù–´–ô –≠–ö–†–ê–ù ========== -->
        <div id="screen-main" class="screen active">
            <div id="character-area">
                <div id="character-container" data-tooltip="–ö–ª–∏–∫–Ω–∏, —á—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å –º–æ–Ω–µ—Ç—ã (—Ç—Ä–∞—Ç–∏—Ç —ç–Ω–µ—Ä–≥–∏—é).">
                    <img id="base-character" src="img/men.png" alt="–ü–µ—Ä—Å–æ–Ω–∞–∂">
                    <div id="equipment-layer"></div>
                </div>
                <!-- –û—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø–∏—Ç–æ–º—Ü–∞ –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ -->
                <div id="pet-main-container"></div>
            </div>
        </div>

        <!-- ========== –ú–ê–°–¢–ï–†–°–ö–ê–Ø ========== -->
        <div id="screen-workshop" class="screen">
            <div class="tabs">
                <button class="tab-button active" data-tab="character" data-tooltip="–°–Ω–∞—Ä—è–∂–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞">üë§ –ü–µ—Ä—Å–æ–Ω–∞–∂</button>
                <button class="tab-button" data-tab="pets" data-tooltip="–ü–∏—Ç–æ–º—Ü—ã-–ø–æ–º–æ—â–Ω–∏–∫–∏">üêæ –ü–∏—Ç–æ–º—Ü—ã</button>
                <button class="tab-button" data-tab="talents" data-tooltip="–£–ª—É—á—à–µ–Ω–∏—è –∏ –∫—Ä–∞—Ñ—Ç">‚ú® –¢–∞–ª–∞–Ω—Ç—ã</button>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞ –ü–ï–†–°–û–ù–ê–ñ (—ç–∫–∏–ø–∏—Ä–æ–≤–∫–∞) -->
            <div id="tab-character" class="tab-content active">
                <div class="customization-preview">
                    <div id="char-preview-container" class="character-preview">
                        <img id="preview-base" src="img/men.png" alt="–ü–µ—Ä—Å–æ–Ω–∞–∂">
                        <div id="preview-equipment"></div>
                        <div id="preview-pet"></div>
                    </div>
                </div>
                <div class="slot-selector">
                    <button class="slot-btn active" data-slot="hat" data-tooltip="–ì–æ–ª–æ–≤–Ω—ã–µ —É–±–æ—Ä—ã">üé© –ì–æ–ª–æ–≤–∞</button>
                    <button class="slot-btn" data-slot="shirt" data-tooltip="–û–¥–µ–∂–¥–∞ –Ω–∞ —Ç—É–ª–æ–≤–∏—â–µ">üëï –¢—É–ª–æ–≤–∏—â–µ</button>
                    <button class="slot-btn" data-slot="legs" data-tooltip="–®—Ç–∞–Ω—ã –∏ –æ–±—É–≤—å">üëñ –ù–æ–≥–∏</button>
                </div>
                <div id="slot-items" class="items-grid"></div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞ –ü–ò–¢–û–ú–¶–´ -->
            <div id="tab-pets" class="tab-content">
                <div style="display: flex; align-items: center;">
                    <h3>üêæ –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–∏—Ç–æ–º—Ü—ã</h3>
                    <span class="info-icon" onclick="showInfo('–ü–∏—Ç–æ–º—Ü—ã –ø–æ–º–æ–≥–∞—é—Ç –≤ –±–æ—é –∏ –¥–∞—é—Ç –ø–∞—Å—Å–∏–≤–Ω—ã–µ –±–æ–Ω—É—Å—ã. –ö—É–ø–∏—Ç—å –º–æ–∂–Ω–æ –∑–∞ –º–æ–Ω–µ—Ç—ã.')">‚ìò</span>
                </div>
                <div id="pets-grid" class="items-grid"></div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞ –¢–ê–õ–ê–ù–¢–´ (–ø–æ–∫—É–ø–∫–∞ –∑–∞—Ä—è–¥–æ–≤, —É–ª—É—á—à–µ–Ω–∏–µ, –∫—Ä–∞—Ñ—Ç) -->
            <div id="tab-talents" class="tab-content">
                <!-- –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –≤–∫–ª–∞–¥–∫–∏ -->
                <div class="talent-tabs">
                    <button class="tab-btn active" data-tab="shop-charges" data-tooltip="–ö—É–ø–∏—Ç—å –∑–∞—Ä—è–¥—ã –¥–ª—è —Ç–∞–ª–∞–Ω—Ç–æ–≤">üõí –ó–∞—Ä—è–¥—ã</button>
                    <button class="tab-btn" data-tab="shop-upgrade" data-tooltip="–£–ª—É—á—à–∏—Ç—å —Ç–∞–ª–∞–Ω—Ç—ã –Ω–∞–≤—Å–µ–≥–¥–∞">‚¨ÜÔ∏è –£–ª—É—á—à–µ–Ω–∏–µ</button>
                    <button class="tab-btn" data-tab="shop-craft" data-tooltip="–°–æ–∑–¥–∞—Ç—å –º–æ—â–Ω—ã–µ —Ç–∞–ª–∞–Ω—Ç—ã –∏–∑ –±–∞–∑–æ–≤—ã—Ö">‚öíÔ∏è –ö—Ä–∞—Ñ—Ç</button>
                </div>

                <!-- –ü–æ–∫—É–ø–∫–∞ –∑–∞—Ä—è–¥–æ–≤ -->
                <div id="shop-charges" class="shop-tab active">
                    <div class="attack-charges-container"></div>
                </div>

                <!-- –£–ª—É—á—à–µ–Ω–∏–µ —Ç–∞–ª–∞–Ω—Ç–æ–≤ -->
                <div id="shop-upgrade" class="shop-tab">
                    <div class="talents-upgrade-container">
                        <div class="talent">
                            <span>üó°Ô∏è –ë–∞–∑–æ–≤—ã–π —É—Ä. <span id="basicLevel">1</span> (—É—Ä–æ–Ω <span id="basicDmg">10</span>)</span>
                            <button class="upgrade-btn" data-talent="basic" data-tooltip="–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –±–∞–∑–æ–≤—ã–π —É—Ä–æ–Ω">75</button>
                        </div>
                        <div class="talent">
                            <span>üí• –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É—Ä. <span id="critLevel">1</span> (—à–∞–Ω—Å <span id="critChanceUpgrade">20</span>%)</span>
                            <button class="upgrade-btn" data-talent="critical" data-tooltip="–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —à–∞–Ω—Å –∫—Ä–∏—Ç–∞">150</button>
                        </div>
                        <div class="talent">
                            <span>‚ò†Ô∏è –Ø–¥–æ–≤–∏—Ç—ã–π —É—Ä. <span id="poisonLevel">1</span> (—É—Ä–æ–Ω <span id="poisonDmgUpgrade">3</span>)</span>
                            <button class="upgrade-btn" data-talent="poison" data-tooltip="–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —É—Ä–æ–Ω —è–¥–∞">200</button>
                        </div>
                    </div>
                </div>

                <!-- –ö—Ä–∞—Ñ—Ç —Ç–∞–ª–∞–Ω—Ç–æ–≤ -->
                <div id="shop-craft" class="shop-tab">
                    <div class="crafting-area">
                        <div class="craft-slots">
                            <div class="craft-slot" data-talent=""></div>
                            <div class="craft-slot" data-talent=""></div>
                        </div>
                        <div class="craft-result">
                            <button id="sonicButton" style="display:none;" data-tooltip="–ó–≤—É–∫–æ–≤–æ–π —Ç–∞–ª–∞–Ω—Ç">üîä –ó–≤—É–∫–æ–≤–æ–π</button>
                            <button id="fireButton" style="display:none;" data-tooltip="–û–≥–Ω–µ–Ω–Ω—ã–π —Ç–∞–ª–∞–Ω—Ç">üî• –û–≥–Ω–µ–Ω–Ω—ã–π</button>
                            <button id="iceButton" style="display:none;" data-tooltip="–õ–µ–¥—è–Ω–æ–π —Ç–∞–ª–∞–Ω—Ç">‚ùÑÔ∏è –õ–µ–¥—è–Ω–æ–π</button>
                        </div>
                        <div class="talent-pool">
                            <h4>üì¶ –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–∞–ª–∞–Ω—Ç—ã –¥–ª—è –∫—Ä–∞—Ñ—Ç–∞</h4>
                            <div class="talent-cards">
                                <div class="talent-card" data-talent="basic" data-tooltip="–ë–∞–∑–æ–≤—ã–π —Ç–∞–ª–∞–Ω—Ç">üó°Ô∏è –ë–∞–∑–æ–≤—ã–π</div>
                                <div class="talent-card" data-talent="critical" data-tooltip="–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ç–∞–ª–∞–Ω—Ç">üí• –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π</div>
                                <div class="talent-card" data-talent="poison" data-tooltip="–Ø–¥–æ–≤–∏—Ç—ã–π —Ç–∞–ª–∞–Ω—Ç">‚ò†Ô∏è –Ø–¥–æ–≤–∏—Ç—ã–π</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========== –ì–ò–õ–¨–î–ò–Ø ========== -->
        <div id="screen-guild" class="screen">
            <div id="guild-view"></div>
        </div>

        <!-- ========== –ù–ò–ñ–ù–Ø–Ø –ù–ê–í–ò–ì–ê–¶–ò–Ø ========== -->
        <nav id="bottom-nav">
            <button data-screen="main" class="nav-btn active" title="–ì–ª–∞–≤–Ω–∞—è">üë§</button>
            <button data-screen="workshop" class="nav-btn" title="–ú–∞—Å—Ç–µ—Ä—Å–∫–∞—è">üîß</button>
            <button data-screen="guild" class="nav-btn" title="–ì–∏–ª—å–¥–∏—è">üè∞</button>
        </nav>

        <!-- ========== –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û: –°–û–ó–î–ê–ù–ò–ï –ì–ò–õ–¨–î–ò–ò ========== -->
        <div id="create-guild-modal" class="modal hidden">
            <div class="modal-content">
                <h3>‚ú® –°–æ–∑–¥–∞–Ω–∏–µ –≥–∏–ª—å–¥–∏–∏</h3>
                <input type="text" id="guild-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –≥–∏–ª—å–¥–∏–∏ (–º–∏–Ω. 5 —Å–∏–º–≤–æ–ª–æ–≤)">
                <textarea id="guild-desc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)" rows="2"></textarea>
                <input type="url" id="guild-chat-link" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ —á–∞—Ç/–∫–∞–Ω–∞–ª (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)">
                <div class="modal-buttons">
                    <button id="confirm-create-guild" class="glow-button">‚úÖ –°–æ–∑–¥–∞—Ç—å</button>
                    <button id="cancel-create-guild">‚ùå –û—Ç–º–µ–Ω–∞</button>
                </div>
            </div>
        </div>

        <!-- ========== –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û: –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ë–ò–¢–í–´ ========== -->
        <div id="battle-result-modal" class="modal hidden">
            <div class="modal-content">
                <h3 id="battle-result-title">–†–µ–∑—É–ª—å—Ç–∞—Ç –±–∏—Ç–≤—ã</h3>
                <div id="battle-result-content" style="max-height: 300px; overflow-y: auto; margin-bottom: 16px; padding-right: 5px;"></div>
                <div class="modal-buttons">
                    <button id="close-battle-result" class="glow-button" style="background: #4a6c8f;">–ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
            </div>
        </div>

        <!-- ========== –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ü–†–û–§–ò–õ–Ø ========== -->
        <div id="profile-modal" class="modal hidden">
            <div class="modal-content profile-content">
                <div class="profile-avatar">
                    <img id="profile-avatar-img" src="" alt="Avatar">
                </div>
                <div class="profile-name" id="profile-name">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                <div class="profile-id">ID: <span id="profile-id">...</span></div>
                <div class="profile-level">–£—Ä–æ–≤–µ–Ω—å <span id="profile-level">1</span></div>
                <div class="xp-bar-container">
                    <div class="xp-bar-fill" id="profile-xp-fill" style="width:0%"></div>
                </div>
                <div class="xp-text"><span id="profile-xp-current">0</span> / <span id="profile-xp-next">100</span> XP</div>
                <div class="profile-damage">üí• –í—Å–µ–≥–æ —É—Ä–æ–Ω–∞: <span id="profile-damage">0</span></div>
                <div class="music-toggle-container">
                    <button id="music-toggle-btn" class="glow-button" style="width:100%; margin-top:10px;" data-tooltip="–í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å —Ñ–æ–Ω–æ–≤—É—é –º—É–∑—ã–∫—É">
                        üéµ –ú—É–∑—ã–∫–∞: –í–∫–ª
                    </button>
                </div>
                <button class="close-modal-btn glow-button" id="close-profile-modal">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>

        <!-- ========== –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –î–†–£–ó–ï–ô ========== -->
        <div id="friends-modal" class="modal hidden">
            <div class="modal-content friends-content">
                <h3>üë• –î—Ä—É–∑—å—è</h3>
                <div class="friends-my-id">
                    <span>–í–∞—à ID: </span>
                    <strong id="friends-my-id-value"></strong>
                    <button class="copy-btn" onclick="copyToClipboard(document.getElementById('friends-my-id-value').innerText)" data-tooltip="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ID">üìã</button>
                </div>

                <div class="friends-tabs">
                    <button class="friends-tab-btn active" data-tab="list" data-tooltip="–°–ø–∏—Å–æ–∫ —Ç–≤–æ–∏—Ö –¥—Ä—É–∑–µ–π">–î—Ä—É–∑—å—è</button>
                    <button class="friends-tab-btn" data-tab="requests" data-tooltip="–í—Ö–æ–¥—è—â–∏–µ –∑–∞—è–≤–∫–∏">–ó–∞—è–≤–∫–∏</button>
                    <button class="friends-tab-btn" data-tab="search" data-tooltip="–ù–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ Telegram ID">–ù–∞–π—Ç–∏ –¥—Ä—É–≥–∞</button>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞: –°–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π -->
                <div id="friends-list-tab" class="friends-tab-content active">
                    <div id="friends-list-container"></div>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞: –í—Ö–æ–¥—è—â–∏–µ –∑–∞—è–≤–∫–∏ -->
                <div id="friends-requests-tab" class="friends-tab-content">
                    <div id="friends-requests-container"></div>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞: –ü–æ–∏—Å–∫ –¥—Ä—É–≥–∞ -->
                <div id="friends-search-tab" class="friends-tab-content">
                    <input type="text" id="friends-search-input" placeholder="Telegram ID –¥—Ä—É–≥–∞">
                    <button id="friends-search-btn" class="glow-button" data-tooltip="–ù–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID">–ù–∞–π—Ç–∏</button>
                    <div id="friends-search-result"></div>
                </div>

                <button class="close-modal-btn" id="close-friends-modal">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>

        <!-- ========== –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –†–ï–ô–¢–ò–ù–ì–ê –ì–ò–õ–¨–î–ò–ô ========== -->
        <div id="guild-rating-modal" class="modal hidden">
            <div class="modal-content rating-modal">
                <h3>üèÜ –†–µ–π—Ç–∏–Ω–≥ –≥–∏–ª—å–¥–∏–π</h3>
                <div id="guild-rating-content" style="max-height: 60vh; overflow-y: auto; margin-bottom: 16px;"></div>
                <div class="modal-buttons">
                    <button id="close-guild-rating" class="glow-button" style="background: #4a6c8f;">–ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
            </div>
        </div>

        <!-- ========== –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ï–ñ–ï–î–ù–ï–í–ù–´–• –ë–û–ù–£–°–û–í ========== -->
        <div id="daily-bonus-modal" class="modal hidden">
            <div class="modal-content bonus-modal">
                <h3>üéÅ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å</h3>
                <div id="bonus-calendar" class="bonus-calendar"></div>
                <div id="bonus-info" class="bonus-info"></div>
                <div class="modal-buttons">
                    <button id="claim-bonus-btn" class="glow-button" data-tooltip="–ó–∞–±—Ä–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–π –±–æ–Ω—É—Å">–ó–∞–±—Ä–∞—Ç—å</button>
                    <button onclick="closeDailyBonusModal()" class="glow-button cancel-btn">–ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
            </div>
        </div>

        <!-- ========== –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –¢–£–¢–û–†–ò–ê–õ–ê ========== -->
        <div id="tutorial-modal" class="modal hidden">
            <div class="modal-content tutorial-content">
                <h3 id="tutorial-title">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Hiko Adventure!</h3>
                <div id="tutorial-text">–≠—Ç–æ –∫—Ä–∞—Ç–∫–æ–µ –æ–±—É—á–µ–Ω–∏–µ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –æ—Å–≤–æ–∏—Ç—å—Å—è.</div>
                <div class="tutorial-highlight" id="tutorial-highlight"></div>
                <div class="modal-buttons">
                    <button id="tutorial-next" class="glow-button">–î–∞–ª–µ–µ</button>
                    <button id="tutorial-skip" class="glow-button cancel-btn">–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å</button>
                </div>
            </div>
        </div>

        <!-- –ü–ª–∞–≤–∞—é—â–∞—è –∫–Ω–æ–ø–∫–∞ –¥—Ä—É–∑–µ–π -->
        <div id="friends-fab" class="fab" onclick="openFriendsModal()" data-tooltip="–î—Ä—É–∑—å—è –æ–Ω–ª–∞–π–Ω">
            <span id="friends-online-count">0</span>–≤ —Å–µ—Ç–∏
        </div>
    </div>

    <!-- Telegram Web App SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
    <!-- –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç -->
    <script src="script.js"></script>
</body>
</html>